<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema"
	targetNamespace="http://www.cat.com/em/feed/v5/Fence"
	xmlns:fence="http://www.cat.com/em/feed/v5/Fence"
	xmlns:feed="http://www.cat.com/em/feed/v5/CommonFeed"
	elementFormDefault="unqualified"
	xmlns:pref="http://www.cat.com/em/feed/v5/CommonFeed">

    <import namespace="http://www.cat.com/em/feed/v5/CommonFeed" schemaLocation="CommonSchema_For_Fence_v5.xsd"></import>
	
	<complexType name="Message">
		<annotation>
			<documentation>
				Delivers all relevant status information about the time based product watch activity and alarms generated by PLM module.
				Communicates the particular status information of the ECM. If any of the byte that it defines is set to "Yes", this denotes that a particular condition has occurred since last report of this status byte in either the status message or SMU report.
			</documentation>
		</annotation>
		<sequence>
			<element name="header" type="feed:TopicHeader" minOccurs="1" maxOccurs="1"/>
			<element name="timeWatchActive" type="feed:YesNo" minOccurs="1" maxOccurs="1">
				<annotation>
					<documentation>
						Time-Based Product Watch Active
					</documentation>
				</annotation>
			</element>
			<element name="exclusiveWatchActive" type="feed:YesNo" minOccurs="1" maxOccurs="1">
				<annotation>
					<documentation>
						Exclusive Product Watch Active
					</documentation>
				</annotation>
			</element>
			<element name="inclusiveWatchActive" type="feed:YesNo" minOccurs="1" maxOccurs="1">
				<annotation>
					<documentation>
						Inclusive Product Watch Active
					</documentation>
				</annotation>
			</element>
			<element name="timeWatchAlarm" type="feed:YesNo" minOccurs="1" maxOccurs="1">
				<annotation>
					<documentation>
						Time-Based Product Watch Alarm
					</documentation>
				</annotation>
			</element>
			<element name="exclusiveWatchAlarm" type="feed:YesNo" minOccurs="1" maxOccurs="1">
				<annotation>
					<documentation>
						Exclusive Product Watch Alarm
					</documentation>
				</annotation>
			</element>
			<element name="inclusiveWatchAlarm" type="feed:YesNo" minOccurs="1" maxOccurs="1">
				<annotation>
					<documentation>
						Inclusive Product Watch Alarm
					</documentation>
				</annotation>
			</element>
			<element name="satelliteBlockage" type="feed:YesNo" minOccurs="0" maxOccurs="1">
				<annotation>
					<documentation>Satellite Blockage</documentation>
				</annotation>
			</element>
			<element name="disconnectSwitchUsed" type="feed:YesNo" minOccurs="0" maxOccurs="1">
				<annotation>
					<documentation>
						Disconnect Switch Used
					</documentation>
				</annotation>
			</element>
		</sequence>
	</complexType>

	<element name="topic" type="fence:TopicBlock">
		<annotation>
			<documentation>
				Communicates the particular status information of the ECM. 
				If any of the byte that it defines is set to "Yes", this denotes 
				that a particular condition has occurred since last report of this 
				status byte in either the status message or SMU report.
			</documentation>
		</annotation>
	</element>

	<complexType name="TopicBlock">
		<sequence>
            <element name="nextBuffer" type="feed:NextBuffer" minOccurs="1" maxOccurs="1"/>
            <element name="message" type="fence:Message" minOccurs="1" maxOccurs="unbounded"/>
		</sequence>
	</complexType>
	
	<complexType name="FenceHeader">
    	<sequence>
    		<element name="id" type="long" maxOccurs="1"
    			minOccurs="1">
    		</element>
    		<element name="changeHistory"
    			type="fence:ChangeHistory" maxOccurs="1" minOccurs="1">
    		</element>
    		<element name="equipment" type="fence:FenceEquipment"
    			maxOccurs="1" minOccurs="1">
    		</element>
    		<element name="sequenceNumber" type="int" maxOccurs="1"
    			minOccurs="1">
    		</element>
    		<element name="active" type="feed:YesNo" maxOccurs="1"
    			minOccurs="1">

    		</element>
    		<element name="description" type="string" maxOccurs="1"
    			minOccurs="0">
    		</element>
    		<element name="acknowledged" type="feed:YesNo" maxOccurs="1"
    			minOccurs="1">

    		</element>
    		<element name="effectivity" type="fence:EffectiveTime"
    			maxOccurs="1" minOccurs="0">
    		</element>
    		<element name="type" maxOccurs="1" minOccurs="1">
    			<simpleType>
    				<restriction base="string">
    					<enumeration value="I"></enumeration>
    					<enumeration value="E"></enumeration>
    					<enumeration value="T"></enumeration>
    				</restriction>
    			</simpleType>
    		</element>
    	</sequence>
    </complexType>

    <complexType name="ChangeHistory">
    	<sequence>
    		<element name="userId" type="string" maxOccurs="1" minOccurs="1"></element>
    		<element name="date" type="string" maxOccurs="1" minOccurs="1"></element>
    	</sequence>
    </complexType>

    <complexType name="FenceEquipment">
    	<sequence>
    		<element name="serialNumber" type="string"></element>
    		<element name="make" type="string"></element>
    	</sequence>
    </complexType>

    <complexType name="TimeFence">
    	<sequence>
    		<element name="header" type="fence:FenceHeader" minOccurs="1" maxOccurs="1"></element>

    		<element name="allowed" type="fence:TimeAllowed" minOccurs="1" maxOccurs="1"></element>
    	</sequence>
    </complexType>

    <complexType name="EffectiveTime">
    	<sequence>
    		<element name="begin" type="string"></element>
    		<element name="end" type="string"></element>
    	</sequence>
    </complexType>

    <complexType name="TimeAllowed">
    	<sequence>
    		<element name="sun" type="feed:YesNo" minOccurs="0" maxOccurs="1">

    		</element>
    		<element name="mon" type="feed:YesNo" minOccurs="0" maxOccurs="1">

    		</element>
    		<element name="tue" type="feed:YesNo" minOccurs="0" maxOccurs="1">

    		</element>
    		<element name="wed" type="feed:YesNo" minOccurs="0" maxOccurs="1">

    		</element>
    		<element name="thu" type="feed:YesNo" minOccurs="0" maxOccurs="1">

    		</element>
    		<element name="fri" type="feed:YesNo" minOccurs="0" maxOccurs="1">

    		</element>
    		<element name="sat" type="feed:YesNo" minOccurs="0" maxOccurs="1">

    		</element>
    	</sequence>
    </complexType>

    <complexType name="TimeFenceTopic">
    	<sequence>
    		<element name="nextBuffer" type="feed:NextBuffer" minOccurs="1" maxOccurs="1"></element>
    		<element name="timeFences" type="fence:TimeFenceBlock"
    			maxOccurs="1" minOccurs="1">
    		</element>
    	</sequence>
    </complexType>

    <element name="timeFenceConfig" type="fence:TimeFenceTopic"></element>

    <complexType name="GeoFence">
    	<sequence>
    		<element name="header" type="fence:FenceHeader" minOccurs="1" maxOccurs="1"></element>

    		<element name="center" type="fence:FenceLocation" minOccurs="1" maxOccurs="1"></element>
    		<element name="radius" type="fence:FenceRadius" minOccurs="1" maxOccurs="1"></element>
    	</sequence>
    </complexType>

    <complexType name="FenceLocation">
    	<sequence>
    		<element name="latitude" type="double" minOccurs="1" maxOccurs="1"></element>
    		<element name="longitude" type="double" minOccurs="1" maxOccurs="1"></element>
    	</sequence>
    </complexType>

    <complexType name="FenceRadius">
    	<sequence>
    		<element name="distance" type="double" minOccurs="1" maxOccurs="1"></element>
    		<element name="uom" type="feed:UnitOfMeasure" minOccurs="1" maxOccurs="1"></element>
    	</sequence>
    </complexType>

    <complexType name="GeoFenceTopic">
    	<sequence>
    		<element name="nextBuffer" type="feed:NextBuffer" minOccurs="1" maxOccurs="1"></element>
    		<element name="geoFences" type="fence:GeoFenceBlock"
    			maxOccurs="1" minOccurs="1">
    		</element>
    	</sequence>
    </complexType>

    <element name="geoFenceConfig" type="fence:GeoFenceTopic"></element>

    <complexType name="GeoFenceBlock">
    	<sequence>
    		<element name="geoFence" type="fence:GeoFence" maxOccurs="unbounded" minOccurs="0"></element>
    	</sequence>
    </complexType>

    <complexType name="TimeFenceBlock">
    	<sequence>
    		<element name="timeFence" type="fence:TimeFence" maxOccurs="unbounded" minOccurs="0"></element>
    	</sequence>
    </complexType>
	
</schema>