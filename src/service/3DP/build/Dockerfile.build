FROM 276986344560.dkr.ecr.us-west-2.amazonaws.com/base-images:dotnet-2.1-sdk 
ARG SERVICE_PATH

COPY . /build/
WORKDIR /build

RUN apt-get update \
&& apt --assume-yes install libc6-dev \
&& apt --assume-yes install libgdiplus

RUN dotnet publish ./$SERVICE_PATH/src/WebApi/VSS.Productivity3D.WebApi.csproj -o /artifacts -f netcoreapp2.1 --runtime linux-x64
