parameters:
  - name: servicePath
    type: string
  - name: solution
    type: string
  - name: testFolder
    type: string

steps:
  - task: DotNetCoreCLI@2
    displayName: "dotnet build"
    inputs:
      command: 'build'
      projects: "${{ parameters.servicePath }}/${{ parameters.solution }}"
      arguments: "-nowarn:NU1701"

  - task: DotNetCoreCLI@2
    displayName: "dotnet test"
    inputs:
      command: test
      # 'Different pattern' delimeter is a new line.
      projects: |
       "${{ parameters.servicePath }}/${{ parameters.testFolder }}/**/*.csproj"
       "!**/*IntegrationTests.csproj"
      publishTestResults: false
