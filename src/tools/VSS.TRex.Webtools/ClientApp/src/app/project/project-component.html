<h1>Projects</h1>
<p>
  Project UID: <input [(ngModel)]="projectUid" size="37" type="text" value="" />
  <button (click)="selectProject()">Select</button>
  <button (click)="setProjectToZero()">Zero</button>
  Available Projects({{allProjectsMetadata.length}}):
  <select id="projectMetadata" name="projectMetadata" [(ngModel)]="projectMetadata" (change)="projectMetadataChanged($event)">
    <option *ngFor="let projectMetadata of allProjectsMetadata" [ngValue]="projectMetadata">
      {{ projectMetadata.id }}
    </option>
  </select>
  <button (click)="updateAllProjectsMetadata()">Update Metadata</button>
</p>
<p>Project Extents: {{projectExtents}}, Starts At: {{projectStartDate}}, Ends At: {{projectEndDate}}</p>
<p>Existence map contains {{existenceMapSubGridCount}} subgrids, covering approximately {{(existenceMapSubGridCount * 1024) / 10000}} hectares.</p>
<p>
  Render tiles of type:
  <select id="displayMode" name="displayMode" [(ngModel)]="displayMode" (change)="displayModeChanged($event)">
    <option *ngFor="let displayMode of displayModes" [ngValue]="displayMode">
      {{ displayMode.item2 }}
    </option>
  </select> Timed call took {{timerTotalTime}}ms
</p>
<button (click)="getTile()">Render</button>
<button (click)="getTile10x()">Render 10x</button>
<button (click)="zoomAll()">Zoom All</button>
<button (click)="zoomIn()">Zoom In</button>
<button (click)="zoomOut()">Zoom Out</button>
<button (click)="panLeft()">Left</button>
<button (click)="panRight()">Right</button>
<button (click)="panUp()">Up</button>
<button (click)="panDown()">Down</button>
<br />
<img style="border:1px solid black" class="mapTileImage" src={{base64EncodedTile}} width="{{pixelsX}}" height="{{pixelsY}}" (mouseover)="onMouseOver($event)" (mousemove)="onMouseMove($event)" (wheel)="onMouseWheel($event)" />
<p>Tile: Extents: {{tileExtents}}, Width: {{tileExtents.sizeX().toFixed(3)}} Height: {{tileExtents.sizeY().toFixed(3)}} </p>
<p>Mouse: Screen: {{mousePixelLocation}}, World: {{mouseWorldLocation}} </p>

<H3>Machines [{{machines.length}} in total]</H3>
<!--Display the machines in a list
<p *ngFor="let machine of machines">
  Machine: {{ machine.id }} Internal Index: {{ machine.internalSiteModelMachineIndex }}, Name:{{machine.name}}, Type:{{machine.machineType}},
  Hardware ID: {{machine.machineHardwareID}}, Device Type: {{machine.deviceType}} IsJohnDoe: {{machine.isJohnDoeMachine}},
  Last known location: [{{machine.lastKnownX}}, {{machine.lastKnownY}} at {{machine.lastKnownPositionDateStamp}}],
  Last known design: {{machine.lastKnownDesignName}}, Last known layer: {{machine.lastKnownLayerId}}
</p>
-->
<!--Display the machines in a table-->
<table>
  <tr>
    <th *ngFor="let col of machineColumnNames">
      {{col}}
    </th>
  </tr>
  <tr *ngFor="let machine of machines">
    <td *ngFor="let col of machineColumns">
      {{machine[col]}}
    </td>
  </tr>
</table>

<br />
<H3>Surveyed Surfaces [{{surveyedSurfaces.length}} in total]</H3>
<p>Design File Name: <input [(ngModel)]="surveyedSurfaceFileName" type="text" value="" /> As At Date: <input [(ngModel)]="surveyedSurfaceAsAtDate" type="datetime" value="" /> Offset: <input [(ngModel)]="surveyedSurfaceOffset" type="number" value="" /></p>
<p><button (click)=addNewSurveyedSurface()>Add New Surveyed Surface</button> <button (click)="addADummySurveyedSurface()">Add a dummy!</button></p>

<p *ngFor="let surveyedSurface of surveyedSurfaces">
  <button (click)="deleteSurveyedSurface(surveyedSurface)">Delete</button>
  Surveyed surface: {{ surveyedSurface.id }} as at {{ surveyedSurface.asAtDate }} with offset {{surveyedSurface.designDescriptor.offset}} from file {{surveyedSurface.designDescriptor.fileName}}
</p>

<br />
<H3>Designs [{{designs.length}} in total]</H3>
<p>Design File Name: <input [(ngModel)]="designFileName" type="text" value="" /> Offset: <input [(ngModel)]="designOffset" type="number" value="" /></p>
<p><button (click)=addNewDesign()>Add New Design</button> <button (click)="addADummyDesign()">Add a dummy!</button></p>
<p *ngFor="let design of designs">
  <button (click)="deleteDesign(design)">Delete</button>
  Design: {{ design.id }} with offset {{design.designDescriptor.offset}} from file {{design.designDescriptor.fileName}}
</p>

<br />
<H3>Machine Events</H3>
<p>
  Machine:
  <select id="machine" name="machine" [(ngModel)]="machine" (change)="machineChanged($event)">
    <option *ngFor="let machine of machines" [ngValue]="machine">
      {{ machine.id }} - {{ machine.name }}
    </option>
  </select>

  Event Type:
  <select id="eventType" name="eventType" [(ngModel)]="eventType" (change)="eventTypeChanged($event)">
    <option *ngFor="let eventType of eventTypes" [ngValue]="eventType">
      {{ eventType.item2 }}
    </option>
  </select>
</p>
<p>
  Start Date:<input [(ngModel)]="machineEventsStartDate" type="datetime" value="" />
  End Date:<input [(ngModel)]="machineEventsEndDate" type="datetime" value="" />
  Max Events<input [(ngModel)]="maxMachineEventsToReturn" type="number" value="" />

  <button (click)=updateMachineEvents()>Update</button>
</p>
<p> Number of events retrieved: {{machineEvents.length}}</p>
<table>
  <tr>
    <th *ngFor="let col of ['Date/Time + Event Type']">
      {{col}}
    </th>
  </tr>
  <tr *ngFor="let event of machineEvents">
    <td>
      {{event}}
    </td>
  </tr>
</table>

<br />
<H3>Volume Calculations</H3>
<p><input type="checkbox" [(ngModel)]="applyToViewOnly"> Apply to view only <button (click)="getSimpleFullVolume()">Compute Full Volume</button> Volume: {{projectVolume}}</p>
